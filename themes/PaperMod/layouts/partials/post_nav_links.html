{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- if and (gt (len $pages) 1) (in $pages . ) }}
<nav class="paginav">
  {{- with $pages.Next . }}
  <a class="prev" href="{{ .Permalink }}">
    <span class="title">« {{ i18n "prev_page" }}</span>
    <br>
    <span>{{- .Name -}}</span>
  </a>
  {{- end }}
  {{- with $pages.Prev . }}
  <a class="next" href="{{ .Permalink }}">
    <span class="title">{{ i18n "next_page" }} »</span>
    <br>
    <span>{{- .Name -}}</span>
  </a>
  {{- end }}
</nav>
{{- partial "random_post_button.html" . }}
  
 <!-- 
comments by Giscus
this dynamically selects a theme
at this time the theme will not update if a user manually changes the theme after the page has loaded 
this is so ugly though
 -->
<script src="https://giscus.app/client.js"
data-repo="nelsonfigueroa/nelson.cloud"
data-repo-id="MDEwOlJlcG9zaXRvcnkxOTkzMzc4NDQ="
data-category="Announcements"
data-category-id="DIC_kwDOC-GndM4CjW2g"
data-mapping="pathname"
data-strict="0"
data-reactions-enabled="1"
data-emit-metadata="0"
data-input-position="bottom"
data-theme="dark"
data-lang="en"
crossorigin="anonymous"
async>
</script>

<script>
  var giscusTheme = "light"
  if (document.body.classList.contains('dark')) {
    giscusTheme = 'dark'
  }

  let giscusAttributes = {
    "src": "https://giscus.app/client.js",
    "data-repo": "nelsonfigueroa/nelson.cloud",
    "data-repo-id": "MDEwOlJlcG9zaXRvcnkxOTkzMzc4NDQ=",
    "data-category": "Announcements",
    "data-category-id": "DIC_kwDOC-GndM4CjW2g",
    "data-mapping": "pathname",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "bottom",
    "data-theme": giscusTheme,
    "data-lang": "en",
    "crossorigin": "anonymous",
    "async": "",
  };
  
  let giscusScript = document.createElement("script");
  Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
  document.body.appendChild(giscusScript);
</script>

{{- end }}
