{{- $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}
{{- if and (gt (len $pages) 1) (in $pages . ) }}
<nav class="paginav">
  {{- with $pages.Next . }}
  <a class="prev" href="{{ .Permalink }}">
    <span class="title">« {{ i18n "prev_page" }}</span>
    <br>
    <span>{{- .Name -}}</span>
  </a>
  {{- end }}
  {{- with $pages.Prev . }}
  <a class="next" href="{{ .Permalink }}">
    <span class="title">{{ i18n "next_page" }} »</span>
    <br>
    <span>{{- .Name -}}</span>
  </a>
  {{- end }}
</nav>


<script>
const posts = [
{{- range .Site.RegularPages -}}
  "{{ .RelPermalink }}",
{{- end -}}
];

if (posts.length > 0) {
  function getRandomPost() {
    const randomIndex = Math.floor(Math.random() * posts.length);
    window.location.href = posts[randomIndex].concat("?ref=random");
  }
}
</script>

<article class="post-entry">
    <header class="entry-header">
        <h2 class="entry-hint-parent entry-content">
            Or see a random post »
        </h2>
    </header>
    <a class="entry-link" onclick="getRandomPost()" href="#"></a>
</article>

{{- end }}
